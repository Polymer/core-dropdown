<!--
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<!--

`core-popup` is an element that is positioned relatively to another element, usually the
element that triggers the popup. The popup and the triggering element should be children
of the same element that has a CSS `position`.

Example:

    <template is="auto-binding">
      <div relative>
        <div id="trigger">Your favorite pastry:</div>
        <core-popup relatedTarget="{{$.trigger}}">
          <core-menu>
          <core-item label="Churro"></core-item>
          <core-item label="Donut"></core-item>
          <core-item label="Macaron"></core-item>
          </core-menu>
        </core-popup>
      </div>
    </template>

Positioning
-----------

By default, the popup is positioned on top of the `relatedTarget` with the top and left edges aligned.
The `halign` and `valign` properties controls the various alignments. The size of the popup is
automatically restrained such that it is entirely visible on the screen.

If you need more control over the popup's position, use CSS. The `halign` and `valign` properties are
ignored if either `top` or `left` are set on the popup.

The popup is positioned with `position: absolute` by default. 

Example:

    <style>
      /* manually position the popup with position: absolute in a container with position: relative so it scrolls with #control */
      core-popup {
        position: absolute;
        top: 0;
        left: 0;
      }
    </style>

    <template is="auto-binding">
      <div relative>
        <div id="control">Your favorite pastry:</div>
        <core-popup relatedTarget="{{$.control}}">
          <core-menu>
            <core-item label="Churro"></core-item>
            <core-item label="Donut"></core-item>
            <core-item label="Macaron"></core-item>
          </core-menu>
        </core-popup>
      </div>
    </template>

@group Polymer Core Elements
@element core-popup
@homepage github.io
-->

<!--
Fired when an item's selection state is changed. This event is fired both
when an item is selected or deselected. The `isSelected` detail property
contains the selection state.

@event core-select
@param {Object} detail
  @param {boolean} detail.isSelected true for selection and false for de-selection
  @param {Object} detail.item the item element
-->
<link href="../polymer/polymer.html" rel="import">

<link href="core-popup-overlay.html" rel="import">

<polymer-element name="core-popup">
<template>

  <link href="core-popup.css" rel="stylesheet">

  <core-popup-overlay id="overlay" target="{{}}" sizingTarget="{{$.menu}}" relatedTarget="{{relatedTarget}}" opened="{{opened}}" halign="{{halign}}" valign="{{valign}}" transition="{{transition}}"></core-popup-overlay>

  <content></content>

</template>
<script>

  Polymer({

    publish: {

      /**
       * The element associated with this menu, usually the element that triggers
       * the menu.
       *
       * @attribute relatedTarget
       * @type Node
       */
      relatedTarget: null,

      /**
       * If true, the menu is currently visible.
       *
       * @attribute opened
       * @type boolean
       * @default false
       */
      opened: false,

      /**
       * The horizontal alignment of the popup relative to `relatedTarget`. `left`
       * means the left edges are aligned together. `right` means the right edges
       * are aligned together.
       *
       * @attribute halign
       * @type 'left' | 'right'
       * @default 'left'
       */
      halign: 'left',

      /**
       * The vertical alignment of the popup relative to `relatedTarget`. `top` means
       * the top edges are aligned together. `bottom` means the bottom edges are
       * aligned together.
       *
       * @attribute valign
       * @type 'top' | 'bottom'
       * @default 'top'
       */
      valign: 'top',

      /**
       * The transition property specifies a string which identifies a 
       * <a href="../core-transition/">`core-transition`</a> element that 
       * will be used to help the overlay open and close. The default
       * `core-transition-fade` will cause the overlay to fade in and out.
       *
       * @attribute transition
       * @type string
       * @default null
       */
      transition: null

    }

  });

</script>
</polymer-element>
